# UniApp微博客应用

## 最近更新：文章发布功能优化

日期：2024-5-25

### 新增功能：
1. 图片缩略图和预览功能
   - 在编辑模式下显示图片缩略图，减小内容区域占用
   - 点击图片支持预览大图
   - 预览模式下自动显示原图，提升阅读体验
   - 支持粘贴图片自动转换为缩略图

2. 文章发布与编辑功能
   - 支持富文本编辑器，可以进行文字排版
   - 支持图片上传和预览
   - 支持添加标签，包括推荐标签和自定义标签
   - 支持预览模式和编辑模式切换
   - 支持文章草稿保存和编辑继续
   - 专门的封面图片上传区域，用户可单独设置文章封面
   
3. API接口更新
   - 新增`article.js`接口文件，包含发布文章、更新文章等API
   - 新增图片上传处理逻辑，支持将本地图片上传到服务器
   - 完善API文档，增加文章相关接口说明
   - 区分正文图片和封面图片的处理逻辑
   - 增加缩略图相关参数和响应字段

### 技术实现：
1. 图片处理
   - 使用uni.uploadFile上传图片
   - 支持多平台适配(APP、H5、小程序)
   - 自动替换HTML内容中的本地路径为服务器URL
   - 提供单独的封面图片设置功能，提升用户体验
   - 使用uni.getImageInfo获取图片信息以计算合适的缩略图尺寸
   - 基于图片原始比例生成缩略图，保持图片显示效果
   - 使用CSS自定义类名实现编辑和预览模式下的不同样式

2. 标签系统
   - 支持添加和删除标签
   - 支持推荐标签和自定义标签
   - 标签限制长度和数量

3. 富文本编辑器
   - 支持基本格式：粗体、链接
   - 支持图片插入
   - 支持预览模式
   - 支持粘贴操作识别并处理图片

### 后端需求：
需要后端实现以下API：
- POST `/api/article` - 发布文章
- PUT `/api/article/{id}` - 更新文章
- POST `/api/article/upload-image` - 上传文章图片（支持type参数区分封面和正文图片）

后端需要新增功能支持：
- 图片上传时，根据width和height参数自动生成缩略图
- 返回imageUrl和thumbnailUrl两个URL，分别用于原图和缩略图
- 在返回文章详情时，提供images数组，包含所有图片信息

详细API说明请参考`frontend-api-docs.md`文档。

## 其他功能

- 用户认证（登录/注册/找回密码）
- 个人中心
- 关注系统
- 更多功能开发中... 